<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.06 [en] (X11; I; Linux 2.0.35 i686) [Netscape]">
   <TITLE>Using the buildmanager application build coordinator</TITLE>
</HEAD>
<BODY>
<A HREF="buildmanager.html">Back</A>
to documentaton overview<hline>
<H1>
Using the <TT>buildmanager</TT> application build coordinator</H1>

<H2>
Introduction</H2>
The <TT>buildmanager</TT> application build coordinator is a flexible,
configurable, tool which lets you build software on multiple systems simultaneouosly,
in an organized and consistent fashion. It allows you to set up standardized
build sequences and actions which will be performed automatically, stop
if/when things go wrong, and allows interaction with various build systems
to correct problems. It is implemented in expectk, which combines the <B>expect</B>
package for working with interactive programs with the <B>Tk</B> windowing
toolkit and the <B>Tcl</B> scripting langauge. Any system you can telnet
to and run commands on can be used as a build system with buildmanager.
<H2>
Starting buildmanager</H2>
At Fermilab, buildmanager is provided as a <B>ups</B> product, so before
you can use it, you need to issue the command <TT>setup buildmanager</TT>
to set the appropriate environment variables, etc. Since buildmanager uses
the X Window system for displays, you need to be sitting at an X window
terminal when you start it. Once these prerequisites are set, you can invoke
buildmanager simply by saying <TT>buildmanager</TT> at your shell prompt.
<H2>
Initial screens</H2>
Two buildmanager windows should appear on your X Window display; a login
window:
<BR><IMG SRC="loginwin.gif" ALT="partial screen image" >
<BR>and an interaction window:
<BR><IMG SRC="loginwin2.gif" ALT="partial screen image" >
<P>The login window has an entry area for your login and password on the
build systems, and a button labeled <B>Dismiss</B>. If you were to press
return in the password entry field, or the <B>Dismiss</B> button, buildmanager
will proceed to log into systems marked as selected in the interaction
window. For now, let's examine the interaction window first.
<P>The interaction window initially has three sections. From top to bottom
they are:
<UL>
<LI>
menu-bar</LI>

<LI>
string entry area</LI>

<LI>
selected-systems checkbuttons</LI>
</UL>
The pressed-in buttons in the selected-system area show the operating system
names of the various systems that buildmanger currently knows about, and
each has a checkbutton to the left of the name that shows whether we are
currently selecting that system to be included. You can click these buttons
to toggle the selection on and off.
<H2>
Logging in</H2>
After filling in a login and password in the login window, if you press
the
<B>Dismiss</B> button, (or the Return key in the password entry box),
buildmanager will remove the login window and proceed to telnet to and
log into each of the currently selected systems.
<P>A text area will appear for each system, with some status labels and
a window-sizing button to the left of each one.
<BR><IMG SRC="b1.gif" ALT="partial screen image" >
<BR>In these text areas, you can watch buildmanager log into each system.
If your login or password is incorrect for some system, buildmanager will
re-prompt you for that system's login information with the login window.
<P>Buildmanger will make a few passes over each login session, running
a few startup commands and setting a few shell functions so that it can 
interact with the windows in a consistent fashion.

<P>During the login procedure, most of the buttons and windows on the buildmanager
screen will grey-out and become inactive, untill the login has completed.

<H2> Running Commands </H2>

You can run commands via several methods, this section will cover them.
<nl>
<li> Entering commands in the text box next to the <b>Command:</b> label and 
  pressing <b>Enter</b> or <b>Return</b> on your keyboard will make buildmanager 
  "take turns" running the command on each host, waiting for a prompt to appear
  on each host before running the command on the next one.
<li> Entering commands in the text box next to the <b>Command:</b> label and 
   pressing <b>Enter</b> on your keyboards numeric keypad will make buildmanager 
   run the command on each host all at the same time.
<li> Selecting a command from the <b>Commands</b> menu will execute the 
   command on each host; whether it takes turns or not depends on the 
   configuration.
<li> Selecting the terminal window for a given host and typing a command in 
  that window will also run commands, or let you answer questions from
   programs, etc.
</nl>
<H2> Adding and Removing systems</H2>

You can then add and delete listed build machines by clicking on their
platform buttons in the main window, or clicking again to delete, and then
pressing the [Update] button to have them actually logged in&nbsp; and/or
logged out as needed.&nbsp; You can add or delete systems from the list
of buttons by pulling down the Edit menu, choosing Host List,&nbsp; and
editing the text list in the pop up window shown below:
<p>
<img src="hostlist.gif">
<p>

You can also destroy a host's window by exiting from that login session when typing in the terminal window.

<H2>
Building Software</H2>

See <a href="Integrating.html">Integrating build_manager, cvs, and upd</a> for examples of using buildmanager to build products.

<H2>Sending commands to some windows and not others</H2>

You can send commands to individual windows by clicking on the terminal
window for that host to select it, and then typing.

You can control which windows get sent commands from the <b>Command</b> menu and 
the <b>Command:</b> entry box by selecting (green) and unselecting 
(background) the checkbox labeled <b>Cmd</b>.  Only windows whose <b>Cmd</b> checkbox is green get sent commands from those sources.

<H2>Logging sessions to a file</H2>

While you can cut and paste large amounts of text from the buildmanager 
windows into an editor, etc. you can also check the <b>Log</b> checkbutton 
next to a given terminal window, which will start writing a log file
named <b><i>hostname</i>.log</b> for the terminal window for <i>hostname</i>
until you un-check the box.  This file will be created in whatever directory 
you were in when you started buildmanager.

</BODY>
</HTML>
